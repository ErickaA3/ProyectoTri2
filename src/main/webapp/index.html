<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Polaris</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{
  --cyan:#2dd4bf;--cyan-dim:rgba(45,212,191,0.15);--cyan-glow:rgba(45,212,191,0.35);
  --purple:#8b5cf6;--blue:#38bdf8;--border:rgba(255,255,255,0.06);
  --border-hover:rgba(45,212,191,0.25);--text:#e2e8f0;--text-dim:#94a3b8;
  --muted:rgba(148,163,184,0.5);--bg:#05060f;--card:#070b18;
  --error:#f87171;--success:#4ade80;
}
html,body{width:100%;height:100%;font-family:'DM Sans',sans-serif;color:var(--text);overflow:hidden}
body{background:var(--bg);background-image:radial-gradient(ellipse 80% 60% at 20% -10%,rgba(45,212,191,0.06) 0%,transparent 60%),radial-gradient(ellipse 60% 50% at 80% 110%,rgba(139,92,246,0.05) 0%,transparent 60%),radial-gradient(ellipse 40% 40% at 50% 50%,rgba(56,189,248,0.03) 0%,transparent 70%)}
body::before{content:'';position:fixed;inset:0;background-image:linear-gradient(rgba(45,212,191,0.02) 1px,transparent 1px),linear-gradient(90deg,rgba(45,212,191,0.02) 1px,transparent 1px);background-size:60px 60px;pointer-events:none;z-index:0}
.navbar{position:relative;z-index:10;height:64px;display:flex;align-items:center;justify-content:space-between;padding:0 2.5rem;border-bottom:1px solid var(--border);background:rgba(5,6,15,0.7);backdrop-filter:blur(24px)}
.nav-brand{font-family:'Syne',sans-serif;font-weight:800;font-size:1.15rem;letter-spacing:.12em;text-transform:uppercase;background:linear-gradient(135deg,var(--text),var(--cyan));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.nav-links{display:flex;gap:2rem;align-items:center}
.nav-links a{color:var(--muted);text-decoration:none;font-size:.78rem;letter-spacing:.08em;text-transform:uppercase;transition:color .25s}
.nav-links a:hover{color:var(--cyan)}
.hero{position:relative;z-index:1;height:calc(100vh - 64px);display:flex;align-items:center;justify-content:center;flex-direction:column;text-align:center}
.hero-badge{display:inline-flex;align-items:center;gap:.5rem;padding:5px 14px;border:1px solid rgba(45,212,191,0.2);border-radius:50px;background:rgba(45,212,191,0.05);font-size:.72rem;letter-spacing:.1em;text-transform:uppercase;color:var(--cyan);margin-bottom:1.8rem;animation:fadeUp .8s ease both}
.hero h1{font-family:'Syne',sans-serif;font-size:clamp(2.5rem,5vw,4rem);font-weight:800;line-height:1.1;color:var(--text);margin-bottom:1.2rem;animation:fadeUp .8s ease .1s both}
.hero h1 span{background:linear-gradient(135deg,var(--cyan),var(--blue));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.hero p{color:var(--text-dim);font-size:1rem;font-weight:300;max-width:420px;line-height:1.7;margin-bottom:2.5rem;animation:fadeUp .8s ease .2s both}
.cta-group{display:flex;gap:1rem;animation:fadeUp .8s ease .3s both}
.btn-primary{padding:13px 32px;border:none;border-radius:50px;background:linear-gradient(135deg,var(--cyan),var(--blue));color:#030711;font-family:'Syne',sans-serif;font-size:.82rem;font-weight:700;letter-spacing:.1em;text-transform:uppercase;cursor:pointer;transition:all .25s}
.btn-primary:hover{transform:translateY(-2px);box-shadow:0 10px 35px var(--cyan-glow)}
.btn-ghost{padding:13px 28px;border:1px solid var(--border-hover);border-radius:50px;background:transparent;color:var(--text-dim);font-family:'Syne',sans-serif;font-size:.82rem;font-weight:600;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;transition:all .25s}
.btn-ghost:hover{color:var(--cyan);border-color:var(--cyan);background:var(--cyan-dim)}
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.85);backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;z-index:100;opacity:0;pointer-events:none;transition:opacity .3s}
.modal-overlay.show{opacity:1;pointer-events:all}
.modal-overlay.show .modal-card{transform:translateY(0) scale(1);opacity:1}
.modal-card{background:var(--card);border:1px solid var(--border);border-radius:20px;padding:36px 32px;width:390px;max-height:90vh;overflow-y:auto;position:relative;transform:translateY(20px) scale(.97);opacity:0;transition:all .35s cubic-bezier(.34,1.56,.64,1);scrollbar-width:none}
.modal-card::-webkit-scrollbar{display:none}
.modal-close{position:absolute;top:16px;right:20px;background:none;border:none;color:var(--muted);font-size:1rem;cursor:pointer;width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;transition:all .2s}
.modal-close:hover{color:var(--text);background:var(--border)}
.tabs{display:flex;background:rgba(255,255,255,0.03);border:1px solid var(--border);border-radius:10px;padding:3px;margin-bottom:24px}
.tab{flex:1;padding:8px;border:none;border-radius:8px;background:none;color:var(--muted);font-family:'Syne',sans-serif;font-size:.78rem;font-weight:600;letter-spacing:.06em;text-transform:uppercase;cursor:pointer;transition:all .25s}
.tab.active{background:var(--cyan-dim);color:var(--cyan);border:1px solid rgba(45,212,191,0.2)}
.form-group{margin-bottom:14px}
.form-group label{display:block;font-size:.72rem;letter-spacing:.07em;text-transform:uppercase;color:var(--muted);margin-bottom:6px}
.form-group input{width:100%;padding:11px 14px;border:1px solid var(--border);border-radius:9px;background:rgba(255,255,255,0.03);color:var(--text);font-family:'DM Sans',sans-serif;font-size:.9rem;outline:none;transition:border-color .2s,background .2s}
.form-group input::placeholder{color:rgba(148,163,184,0.3)}
.form-group input:focus{border-color:rgba(45,212,191,0.4);background:rgba(45,212,191,0.03)}
.strength-bar{height:3px;background:var(--border);border-radius:2px;margin-top:7px;overflow:hidden}
.strength-fill{height:100%;border-radius:2px;width:0%;transition:width .4s,background .4s}
.strength-text{font-size:.68rem;color:var(--muted);margin-top:4px;transition:color .3s}
.input-wrapper{position:relative}
.input-wrapper input{padding-right:40px}
.toggle-pw{position:absolute;right:12px;top:50%;transform:translateY(-50%);background:none;border:none;color:var(--muted);cursor:pointer;font-size:.85rem;transition:color .2s}
.toggle-pw:hover{color:var(--cyan)}
.alert{padding:10px 14px;border-radius:9px;font-size:.82rem;margin-bottom:14px;display:none;align-items:center;gap:.6rem}
.alert.show{display:flex}
.alert-error{background:rgba(248,113,113,0.1);border:1px solid rgba(248,113,113,0.25);color:var(--error)}
.alert-success{background:rgba(74,222,128,0.08);border:1px solid rgba(74,222,128,0.25);color:var(--success)}
.submit-btn{width:100%;padding:13px;border:none;border-radius:10px;background:linear-gradient(135deg,var(--cyan),var(--blue));color:#030711;font-family:'Syne',sans-serif;font-size:.82rem;font-weight:700;letter-spacing:.08em;text-transform:uppercase;cursor:pointer;margin-top:6px;transition:all .25s;display:flex;align-items:center;justify-content:center;gap:.5rem}
.submit-btn:hover{transform:translateY(-1px);box-shadow:0 8px 25px var(--cyan-glow)}
.submit-btn:disabled{opacity:.5;cursor:not-allowed;transform:none;box-shadow:none}
.spinner{width:15px;height:15px;border:2px solid rgba(3,7,17,0.3);border-top-color:#030711;border-radius:50%;animation:spin .6s linear infinite;display:none}
@keyframes fadeUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}
</style>
</head>
<body>

<nav class="navbar">
  <div class="nav-brand">⋆ Polaris</div>
  <div class="nav-links">
    <a href="#">Explorar</a>
    <a href="#">Acerca</a>
    <a href="#">Contacto</a>
  </div>
</nav>

<section class="hero">
  <div class="hero-badge">
    <i class="fa-solid fa-circle" style="color:var(--success);animation:pulse 2s infinite"></i>
    Plataforma educativa activa
  </div>
  <h1>Aprende con <span>Polaris</span></h1>
  <p>Estudia de forma inteligente con IA, misiones diarias y duelos entre amigos.</p>
  <div class="cta-group">
    <button class="btn-primary" id="openLogin">Iniciar Sesión</button>
    <button class="btn-ghost" id="openRegister">Crear cuenta</button>
  </div>
</section>

<div class="modal-overlay" id="modal">
  <div class="modal-card">
    <button class="modal-close" id="closeModal"><i class="fa-solid fa-xmark"></i></button>
    <div class="tabs">
      <button class="tab active" data-tab="login">Entrar</button>
      <button class="tab" data-tab="register">Registrarse</button>
    </div>
    <div class="alert alert-error" id="alertBox">
      <i class="fa-solid fa-circle-exclamation"></i>
      <span id="alertMsg"></span>
    </div>

    <!-- LOGIN -->
    <div id="loginForm">
      <div class="form-group">
        <label>Correo electrónico</label>
        <input type="email" id="loginEmail" placeholder="tu@correo.com" autocomplete="email"/>
      </div>
      <div class="form-group">
        <label>Contraseña</label>
        <div class="input-wrapper">
          <input type="password" id="loginPassword" placeholder="••••••••" autocomplete="current-password"/>
          <button class="toggle-pw" type="button" onclick="togglePw('loginPassword',this)"><i class="fa-regular fa-eye"></i></button>
        </div>
      </div>
      <button class="submit-btn" id="loginBtn" onclick="doLogin()">
        <div class="spinner" id="loginSpinner"></div>
        <span id="loginBtnText">Iniciar Sesión</span>
      </button>
    </div>

    <!-- REGISTER -->
    <div id="registerForm" style="display:none">
      <div class="form-group">
        <label>Nombre de usuario</label>
        <input type="text" id="regUsername" placeholder="polarisuser" autocomplete="username"/>
      </div>
      <div class="form-group">
        <label>Correo electrónico</label>
        <input type="email" id="regEmail" placeholder="tu@correo.com" autocomplete="email"/>
      </div>
      <div class="form-group">
        <label>Contraseña</label>
        <div class="input-wrapper">
          <input type="password" id="regPassword" placeholder="••••••••" oninput="checkStrength(this.value)" autocomplete="new-password"/>
          <button class="toggle-pw" type="button" onclick="togglePw('regPassword',this)"><i class="fa-regular fa-eye"></i></button>
        </div>
        <div class="strength-bar"><div class="strength-fill" id="strengthFill"></div></div>
        <div class="strength-text" id="strengthText"></div>
      </div>
      <div class="form-group">
        <label>Nombre completo <span style="color:var(--muted);font-size:.65rem">(opcional)</span></label>
        <input type="text" id="regFullName" placeholder="Tu nombre" autocomplete="name"/>
      </div>
      <button class="submit-btn" id="registerBtn" onclick="doRegister()">
        <div class="spinner" id="registerSpinner"></div>
        <span id="registerBtnText">Crear cuenta</span>
      </button>
    </div>

  </div>
</div>

<script>
const API_BASE = 'http://localhost:8080/project-1.0-SNAPSHOT';

const modal = document.getElementById('modal');
const openModal  = () => modal.classList.add('show');
const closeModal = () => { modal.classList.remove('show'); clearAlert(); };

document.getElementById('openLogin').onclick    = () => { openModal(); switchTab('login'); };
document.getElementById('openRegister').onclick = () => { openModal(); switchTab('register'); };
document.getElementById('closeModal').onclick   = closeModal;
modal.onclick = e => { if(e.target === modal) closeModal(); };
document.addEventListener('keydown', e => { if(e.key==='Escape') closeModal(); });

document.querySelectorAll('.tab').forEach(t => { t.onclick = () => switchTab(t.dataset.tab); });

function switchTab(tab){
  document.querySelectorAll('.tab').forEach(t => t.classList.toggle('active', t.dataset.tab===tab));
  document.getElementById('loginForm').style.display    = tab==='login'    ? 'block' : 'none';
  document.getElementById('registerForm').style.display = tab==='register' ? 'block' : 'none';
  clearAlert();
}

function showError(msg){ const box=document.getElementById('alertBox'); box.className='alert alert-error show'; box.querySelector('i').className='fa-solid fa-circle-exclamation'; document.getElementById('alertMsg').textContent=msg; }
function showSuccess(msg){ const box=document.getElementById('alertBox'); box.className='alert alert-success show'; box.querySelector('i').className='fa-solid fa-circle-check'; document.getElementById('alertMsg').textContent=msg; }
function clearAlert(){ document.getElementById('alertBox').className='alert alert-error'; }

function togglePw(id,btn){ const input=document.getElementById(id); const isHidden=input.type==='password'; input.type=isHidden?'text':'password'; btn.querySelector('i').className=isHidden?'fa-regular fa-eye-slash':'fa-regular fa-eye'; }

function checkStrength(pw){
  const fill=document.getElementById('strengthFill'); const txt=document.getElementById('strengthText');
  if(!pw){ fill.style.width='0%'; txt.textContent=''; return; }
  let score=0;
  if(pw.length>=8) score++;
  if(/[A-Z]/.test(pw)) score++;
  if(/[0-9]/.test(pw)) score++;
  if(/[^A-Za-z0-9]/.test(pw)) score++;
  const levels=[{w:'20%',c:'#f87171',t:'Muy débil'},{w:'45%',c:'#fb923c',t:'Débil'},{w:'70%',c:'#fbbf24',t:'Moderada'},{w:'100%',c:'#2dd4bf',t:'Fuerte'}];
  const l=levels[Math.max(0,score-1)];
  fill.style.width=l.w; fill.style.background=l.c; txt.style.color=l.c; txt.textContent=l.t;
}

function setLoading(prefix,state){
  document.getElementById(prefix+'Btn').disabled=state;
  document.getElementById(prefix+'Spinner').style.display=state?'block':'none';
  document.getElementById(prefix+'BtnText').style.opacity=state?'0.5':'1';
}

async function doLogin(){
  clearAlert();
  const email=document.getElementById('loginEmail').value.trim();
  const password=document.getElementById('loginPassword').value;
  if(!email||!password){ showError('Completa todos los campos.'); return; }
  if(!/\S+@\S+\.\S+/.test(email)){ showError('Correo no válido.'); return; }
  setLoading('login',true);
  try {
    const res=await fetch(`${API_BASE}/api/login`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})});
    const data=await res.json();
    if(data.success){ showSuccess('¡Bienvenido de vuelta!'); setTimeout(()=>window.location.href='pages/profil.html',1000);}

    else showError(data.message||'Credenciales incorrectas.');
  } catch(e){ showError('Error de conexión. Intenta de nuevo.'); }
  finally{ setLoading('login',false); }
}

async function doRegister(){
  clearAlert();
  const username=document.getElementById('regUsername').value.trim();
  const email=document.getElementById('regEmail').value.trim();
  const password=document.getElementById('regPassword').value;
  const fullName=document.getElementById('regFullName').value.trim();
  if(!username||!email||!password){ showError('Completa los campos obligatorios.'); return; }
  if(username.length<3){ showError('El usuario debe tener al menos 3 caracteres.'); return; }
  if(!/\S+@\S+\.\S+/.test(email)){ showError('Correo no válido.'); return; }
  if(password.length<8){ showError('La contraseña debe tener al menos 8 caracteres.'); return; }
  if(!/[A-Za-z]/.test(password)||!/[0-9]/.test(password)){ showError('La contraseña debe tener letras y números.'); return; }
  setLoading('register',true);
  try {
    const res = await fetch(`${API_BASE}/api/register`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username,email,password,fullName})});
    const text = await res.text();
    console.log('RESPUESTA:', text);
    const data = JSON.parse(text);
    if(data.success){ showSuccess('¡Cuenta creada! Redirigiendo...'); setTimeout(()=>window.location.href='pages/profil.html',1200);}

    else showError(data.message||'No se pudo crear la cuenta.');
} catch(e){ showError('Error: ' + e.message); }
finally{ setLoading('register',false); }
}

document.addEventListener('keydown',e=>{
  if(e.key!=='Enter'||!modal.classList.contains('show')) return;
  if(document.getElementById('loginForm').style.display!=='none') doLogin();
  else doRegister();
});
</script>
</body>
</html>